# This is a Databricks asset bundle definition for acme_dab.
# See https://docs.databricks.com/dev-tools/bundles/index.html for documentation.
bundle:
  name: acme_dab

include:
  # LHP-managed resource files
  - resources/lhp/*.yml
  # User-managed resource files
  - resources/*.yml


sync:
  include:
    - generated/**

targets:

  dev:
    # This is the  developer's dev target for deployment of the bundle to
    # their own workspace to perform testing
    # developer will need to authenticate with their own credentials
    mode: development
    default: true
    workspace:
      host: https://dbc-185ce232-0758.cloud.databricks.com
      root_path: ~/.bundle/${bundle.name}/${bundle.target}


  dev-ci-cd:
    # This is the CI/CD Dev target for deployment of the bundle to Dev CI/CD workspace
    # for the CI/CD actions to test deployment of the bundle
    mode: production
    default: false
    workspace:
      host: https://dbc-185ce232-0758.cloud.databricks.com
      root_path: /Workspace/ci_cd/.bundle/${bundle.name}/${bundle.target}
    permissions:
      - service_principal_name: 2aa4ed8e-0a18-4072-97c6-9c074c8be40d
        level: CAN_MANAGE
    run_as:
      service_principal_name: 2aa4ed8e-0a18-4072-97c6-9c074c8be40d


  tst:
    # This is the CI/CD TST target for deployment of the bundle to the tst workspace
    # for the CI/CD actions to test deployment of the bundle
    mode: production
    default: false
    workspace:
      host: https://dbc-3718d108-7d5e.cloud.databricks.com/
      root_path: /Workspace/ci_cd/.bundle/${bundle.name}/${bundle.target}
    permissions:
      - service_principal_name: 65c09b34-5f72-48da-b70a-a57cd0e69531
        level: CAN_MANAGE
    run_as:
      service_principal_name: 65c09b34-5f72-48da-b70a-a57cd0e69531



  prod:
    # This is the CI/CD Prod target for deployment of the bundle to the prod workspace
    # for the CI/CD actions to test deployment of the bundle
    mode: production
    workspace:
      host: https://dbc-c4243765-c447.cloud.databricks.com
      root_path: /Workspace/ci_cd/.bundle/${bundle.name}/${bundle.target}
    permissions:
      - service_principal_name: e398c2e1-01a6-4a29-b2e9-970681433f09
        level: CAN_MANAGE
    run_as:
      service_principal_name: e398c2e1-01a6-4a29-b2e9-970681433f09
